<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø±ÙˆÙ Ù…Ø¹ Ø£Ø­Ù…Ø¯</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-purple: #6a349c;
            --accent-yellow: #ffcc00;
            --white: #ffffff;
            --green-team: #4ade80;
            --purple-team: #a855f7;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--primary-purple);
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><text x="10" y="50" fill="rgba(255,255,255,0.05)" font-size="40">Ø£</text><text x="60" y="80" fill="rgba(255,255,255,0.05)" font-size="40">Ø¨</text></svg>');
            color: white; margin: 0; overflow: hidden; height: 100vh;
        }

        .screen { display: none; flex-direction: column; align-items: center; width: 100%; height: 100vh; text-align: center; justify-content: center; }
        .active { display: flex; }

        /* --- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© --- */
        .animated-logo { font-size: 5rem; font-weight: 900; display: flex; gap: 10px; margin-bottom: 30px; }
        .animated-logo span { display: inline-block; animation: bounce 1s infinite alternate; text-shadow: 4px 4px 0px #331a4d; }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-20px); } }

        /* --- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (Ù†ÙØ³ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ù„Ø¶Ø¨Ø·) --- */
        .settings-card { background: rgba(0,0,0,0.3); padding: 30px; border-radius: 20px; width: 80%; max-width: 600px; border: 1px solid rgba(255,255,255,0.1); }
        .setting-row { display: flex; justify-content: space-between; align-items: center; margin: 15px 0; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .setting-row input { background: #331a4d; border: 1px solid white; color: white; padding: 5px; border-radius: 5px; text-align: center; }
        
        /* --- Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙˆØ§Ù„Ø£Ø¬Ø±Ø§Ø³ --- */
        .players-bar { display: flex; justify-content: center; gap: 30px; margin: 20px 0; width: 100%; }
        .player-unit { display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .buzzer-btn { 
            width: 50px; height: 50px; background: red; border-radius: 50%; border: 3px solid white; 
            cursor: pointer; box-shadow: 0 4px 0 #800; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        /* --- Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø±ÙˆÙ --- */
        .grid-container { display: grid; grid-template-columns: repeat(7, 70px); gap: 8px; margin-top: 20px; }
        .hexagon {
            width: 70px; height: 80px; background: white; color: var(--primary-purple);
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; cursor: default; transition: 0.3s;
        }
        .hex-green { background: var(--green-team) !important; color: white; }
        .hex-purple { background: var(--purple-team) !important; color: white; }
        .selectable { cursor: pointer !important; border: 3px solid var(--accent-yellow); }

        /* --- ÙˆØ±Ù‚Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ù…Ø¤Ù‚Øª --- */
        #q-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center; z-index: 2000; }
        .paper { width: 500px; background: #8b5cf6; border: 5px solid white; border-radius: 20px; padding: 30px; position: relative; }
        #timer { font-size: 3rem; color: var(--accent-yellow); font-weight: 900; margin-bottom: 10px; }
        .ans-btn { background: white; color: var(--primary-purple); border: none; padding: 10px 20px; border-radius: 10px; margin: 5px; cursor: pointer; font-weight: bold; }

        #admin-purple-alert { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); background: #a855f7; color: white; padding: 15px 40px; border-radius: 15px; z-index: 3000; transition: 0.5s; border: 2px solid white; }
    </style>
</head>
<body>

    <div id="admin-purple-alert">ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ø·ÙˆØ±</div>

    <div id="start-screen" class="screen active">
        <div class="animated-logo">
            <span style="color:var(--accent-yellow)">Ø­Ù€</span><span style="color:var(--accent-yellow)">Ù€Ø±ÙˆÙ</span>
            <span style="color:var(--accent-cyan)">Ù…Ù€</span><span style="color:var(--accent-cyan)">Ù€Ø¹</span>
            <span style="color:var(--accent-red)" id="display-name-start">Ø£Ø­Ù…Ø¯</span>
        </div>
        <button class="btn-main" style="background:white; color:var(--primary-purple); padding:15px 50px; border-radius:30px; font-weight:bold; cursor:pointer;" onclick="navTo('grid-screen')">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
        <button class="btn-main" style="margin-top:10px; background:none; border:1px solid white; color:white; padding:10px 30px; border-radius:20px; cursor:pointer;" onclick="navTo('settings-screen')">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
    </div>

    <div id="settings-screen" class="screen">
        <div class="settings-card">
            <div class="setting-row"><span>Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©:</span><input type="text" id="comp-name" value="Ø£Ø­Ù…Ø¯"></div>
            <div class="setting-row"><span>Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙØ±ÙŠÙ‚ Ø£Ø®Ø¶Ø±:</span><input type="text" id="p-g1" value="ÙŠØ§Ø³Ø±"> <input type="text" id="p-g2" value="Ø³Ø¹Ø¯"></div>
            <div class="setting-row"><span>Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙØ±ÙŠÙ‚ Ø¨Ù†ÙØ³Ø¬ÙŠ:</span><input type="text" id="p-p1" value="ÙŠØ­ÙŠÙ‰"> <input type="text" id="p-p2" value="ÙÙ‡Ø¯"></div>
            <button onclick="saveAndStart()" style="width:100%; padding:10px; background:var(--accent-yellow); border:none; border-radius:10px; font-weight:bold;">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>
    </div>

    <div id="grid-screen" class="screen">
        <h1 id="top-title" style="color:var(--accent-yellow)">Ø­Ø±ÙˆÙ Ù…Ø¹ Ø£Ø­Ù…Ø¯</h1>
        
        <div class="players-bar">
            <div class="player-unit"><div class="buzzer-btn" onclick="pressBuzzer('green', 'p-g1')"></div><span id="label-g1">ÙŠØ§Ø³Ø±</span></div>
            <div class="player-unit"><div class="buzzer-btn" onclick="pressBuzzer('green', 'p-g2')"></div><span id="label-g2">Ø³Ø¹Ø¯</span></div>
            <div style="width:50px"></div>
            <div class="player-unit"><div class="buzzer-btn" onclick="pressBuzzer('purple', 'p-p1')"></div><span id="label-p1">ÙŠØ­ÙŠÙ‰</span></div>
            <div class="player-unit"><div class="buzzer-btn" onclick="pressBuzzer('purple', 'p-p2')"></div><span id="label-p2">ÙÙ‡Ø¯</span></div>
        </div>

        <div class="grid-container" id="main-grid"></div>
        <button onclick="navTo('start-screen')" style="margin-top:20px; background:none; color:white; border:1px solid white; padding:5px 20px; border-radius:10px;">Ø®Ø±ÙˆØ¬</button>
    </div>

    <div id="q-overlay">
        <div class="paper">
            <div id="timer">30</div>
            <h2 id="q-letter" style="color:var(--accent-yellow)">Ø­Ø±Ù Ø£</h2>
            <p id="q-text" style="font-size:1.5rem; font-weight:bold;"></p>
            <div id="ans-area" style="display:none; color:white; margin:10px; border-top:1px solid white; padding-top:10px;">
                Ø§Ù„Ø¬ÙˆØ§Ø¨: <span id="correct-ans"></span>
            </div>
            <div style="margin-top:20px;">
                <button class="ans-btn" onclick="closeQ()">Ø¥ØºÙ„Ø§Ù‚</button>
                <button class="ans-btn" style="background:var(--accent-yellow)" onclick="alert('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ØµØ¯ÙŠÙ‚...')">ğŸ“ Ø§ØªØµØ§Ù„ Ø¨ØµØ¯ÙŠÙ‚</button>
            </div>
        </div>
    </div>

    <script>
        const bank = {
            "Ø£": ["Ø¨ÙŠØª Ø§Ù„Ø£Ø³Ø¯ØŸ", "Ø¹Ø±ÙŠÙ†"], "Ø¨": ["Ø³ÙÙŠÙ†Ø© Ø§Ù„ØµØ­Ø±Ø§Ø¡ØŸ", "Ø¬Ù…Ù„"], "Øª": ["ÙØ§ÙƒÙ‡Ø© Ø°ÙƒØ±Øª Ù…Ø¹ Ø§Ù„Ø²ÙŠØªÙˆÙ†ØŸ", "ØªÙŠÙ†"],
            "Ø«": ["Ø§Ø¨Ù† Ø§Ù„Ø£Ø³Ø¯ØŸ", "Ø´Ø¨Ù„"], "Ø¬": ["Ø¹Ø¶Ùˆ Ø§Ù„ØªÙˆØ§Ø²Ù†ØŸ", "Ø§Ù„Ø£Ø°Ù†"], "Ø­": ["Ø·Ø§Ø¦Ø± Ø¬Ù…ÙŠÙ„ØŸ", "Ø­Ù…Ø§Ù…"],
            "Ø®": ["Ø£Ø¨Ùˆ Ø§Ù„Ø­ØµÙŠÙ†ØŸ", "Ø§Ù„Ø«Ø¹Ù„Ø¨"], "Ø¯": ["Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ", "Ø§Ù„Ø±ÙŠØ§Ø¶"], "Ø±": ["Ø£ÙƒØ¨Ø± Ù‚Ø§Ø±Ø©ØŸ", "Ø¢Ø³ÙŠØ§"]
        }; // Ø£Ø¶Ù Ø§Ù„Ø¨Ù‚ÙŠØ© Ø¨Ù†ÙØ³ Ø§Ù„Ù†Ù…Ø·

        let activeTeam = null;
        let canSelect = false;
        let timerVal = 30;
        let timerInterval;

        function saveAndStart() {
            const name = document.getElementById('comp-name').value;
            document.getElementById('display-name-start').innerText = name;
            document.getElementById('top-title').innerText = "Ø­Ø±ÙˆÙ Ù…Ø¹ " + name;
            document.getElementById('label-g1').innerText = document.getElementById('p-g1').value;
            document.getElementById('label-g2').innerText = document.getElementById('p-g2').value;
            document.getElementById('label-p1').innerText = document.getElementById('p-p1').value;
            document.getElementById('label-p2').innerText = document.getElementById('p-p2').value;
            navTo('start-screen');
        }

        function navTo(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'grid-screen') initGrid();
        }

        function initGrid() {
            const grid = document.getElementById('main-grid');
            grid.innerHTML = "";
            "Ø£Ø¨ØªØ«Ø¬Ø­Ø®Ø¯Ø°Ø±Ø²Ø³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙ‚ÙƒÙ„Ù…Ù†Ù‡ÙˆÙŠ".split("").forEach(l => {
                const d = document.createElement('div');
                d.className = 'hexagon';
                d.innerText = l;
                d.id = "hex-" + l;
                d.onclick = () => { if(canSelect) triggerQ(l, d); };
                grid.appendChild(d);
            });
        }

        function pressBuzzer(team, pId) {
            const pName = document.getElementById(pId).value;
            activeTeam = team;
            canSelect = true;
            alert(`Ø¶ØºØ· (${pName}) Ø§Ù„Ø²Ø±! Ø§Ø®ØªØ± Ø­Ø±ÙØ§Ù‹ Ø§Ù„Ø¢Ù†.`);
            document.querySelectorAll('.hexagon').forEach(h => {
                if(!h.classList.contains('hex-green') && !h.classList.contains('hex-purple')) h.classList.add('selectable');
            });
        }

        function triggerQ(l, el) {
            canSelect = false;
            document.querySelectorAll('.hexagon').forEach(h => h.classList.remove('selectable'));
            const data = bank[l] || ["Ø³Ø¤Ø§Ù„ Ù‚Ø§Ø¯Ù…...", "Ù„Ø§ ÙŠÙˆØ¬Ø¯"];
            document.getElementById('q-letter').innerText = "Ø­Ø±Ù " + l;
            document.getElementById('q-text').innerText = data[0];
            document.getElementById('correct-ans').innerText = data[1];
            document.getElementById('ans-area').style.display = 'none';
            document.getElementById('q-overlay').style.display = 'flex';
            
            el.classList.add(activeTeam === 'green' ? 'hex-green' : 'hex-purple');
            
            startTimer();
        }

        function startTimer() {
            timerVal = 30;
            document.getElementById('timer').innerText = timerVal;
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timerVal--;
                document.getElementById('timer').innerText = timerVal;
                if(timerVal <= 0) {
                    clearInterval(timerInterval);
                    document.getElementById('ans-area').style.display = 'block';
                }
            }, 1000);
        }

        function closeQ() {
            clearInterval(timerInterval);
            document.getElementById('q-overlay').style.display = 'none';
        }

        function openAdminPanel() {
            if(prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:") === "123098") {
                const m = prompt("Ø§Ù„Ø±Ø³Ø§Ù„Ø©:");
                const b = document.getElementById('admin-purple-alert');
                b.innerText = m; b.style.top = "20px";
                setTimeout(() => b.style.top = "-100px", 4000);
            }
        }
    </script>
</body>
</html>
