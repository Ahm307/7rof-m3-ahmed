<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حروف مع أحمد</title>
    <style>
        :root {
            --primary-purple: #6a349c;
            --accent-yellow: #ffcc00;
            --accent-red: #ff4d4d;
            --accent-cyan: #00d2ff;
            --white: #ffffff;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--primary-purple);
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><text x="10" y="50" fill="rgba(255,255,255,0.05)" font-size="40">أ</text><text x="60" y="80" fill="rgba(255,255,255,0.05)" font-size="40">ب</text></svg>');
            color: white; margin: 0; overflow: hidden; display: flex; align-items: center; justify-content: center; height: 100vh;
        }

        /* --- شاشة البداية --- */
        .screen { display: none; flex-direction: column; align-items: center; width: 100%; text-align: center; }
        .active { display: flex; }

        .logo { font-size: 5rem; font-weight: 900; line-height: 0.9; margin-bottom: 20px; text-shadow: 4px 4px 0px #331a4d; }
        .logo span { display: block; }
        .yellow { color: var(--accent-yellow); }
        .cyan { color: var(--accent-cyan); }
        .red { color: var(--accent-red); }

        .btn-main {
            background: var(--white); color: var(--primary-purple); border: none; padding: 12px 60px;
            margin: 8px; border-radius: 30px; font-size: 1.5rem; font-weight: bold; cursor: pointer; width: 300px;
        }

        /* --- شاشة الإعدادات (نفس الصورة) --- */
        .settings-card { background: rgba(0,0,0,0.2); padding: 30px; border-radius: 20px; width: 80%; max-width: 600px; }
        .setting-row { display: flex; justify-content: space-between; align-items: center; margin: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; }
        .option-group button { background: #331a4d; color: white; border: 1px solid white; padding: 5px 15px; border-radius: 10px; cursor: pointer; margin: 0 2px; }
        .option-group button.selected { background: white; color: var(--primary-purple); }

        /* --- شبكة الحروف السداسية --- */
        .grid-container { display: grid; grid-template-columns: repeat(5, 80px); gap: 10px; margin-top: 20px; }
        .hexagon {
            width: 80px; height: 90px; background: white; color: var(--primary-purple);
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            display: flex; align-items: center; justify-content: center; font-size: 1.8rem; font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        .hex-green { background: #4ade80 !important; color: white; }
        .hex-purple { background: #a855f7 !important; color: white; }

        /* --- الظرف (السؤال) --- */
        #envelope-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85);
            display: none; justify-content: center; align-items: center; z-index: 1000;
        }
        .envelope {
            width: 400px; height: 250px; background: #fef3c7; border-radius: 10px; position: relative;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: #92400e; padding: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            transform: scale(0); transition: 0.5s;
        }
        .envelope.open { transform: scale(1); }
        .envelope::before { content: ''; position: absolute; top: 0; border-left: 200px solid transparent; border-right: 200px solid transparent; border-top: 150px solid #fde68a; top: -1px; }

        /* --- التنبيه --- */
        #war-alert { position: fixed; top:0; left:0; width:100%; height:100%; background: red; display:none; z-index:2000; animation: flash 0.2s infinite; }
        @keyframes flash { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="start-screen" class="screen active">
        <div class="logo">
            <span class="yellow">حروف</span>
            <span class="cyan">مع</span>
            <span class="red">أحمد</span>
        </div>
        <button class="btn-main" onclick="navTo('grid-screen')">بدء اللعبة</button>
        <button class="btn-main" onclick="navTo('settings-screen')">إعدادات</button>
        <button class="btn-main" onclick="navTo('categories-screen')">بوابة الأسئلة</button>
        <button class="btn-main" onclick="triggerWar()">خروج</button>
    </div>

    <div id="settings-screen" class="screen">
        <div class="logo" style="font-size: 2rem;">الإعدادات</div>
        <div class="settings-card">
            <div class="setting-row">
                <span>اسم المسابقة:</span>
                <input type="text" value="أحمد" style="background:none; border:1px solid white; color:white; padding:5px; border-radius:5px; text-align:center;">
            </div>
            <div class="setting-row">
                <span>عدد جولات الفوز:</span>
                <div class="option-group">
                    <button>جولة</button><button class="selected">جولتين</button><button>ثلاث جولات</button>
                </div>
            </div>
            <div class="setting-row">
                <span>عدد الخلايا:</span>
                <div class="option-group">
                    <button>خمسة</button><button class="selected">أربعة</button><button>ستة</button>
                </div>
            </div>
            <div class="setting-row">
                <span>لون الخلايا:</span>
                <div class="option-group">
                    <button style="background:#4ade80;"></button>
                    <button style="background:#a855f7;"></button>
                    <button style="background:#ffcc00;"></button>
                </div>
            </div>
            <button class="btn-main" style="width:100%; margin-top:20px;" onclick="navTo('start-screen')">حفظ ورجوع</button>
        </div>
    </div>

    <div id="grid-screen" class="screen">
        <h2 id="current-player">الجولة الأولى</h2>
        <div class="grid-container" id="main-grid"></div>
        <button class="btn-main" style="margin-top:30px;" onclick="navTo('start-screen')">رجوع</button>
    </div>

    <div id="envelope-overlay" onclick="closeEnvelope()">
        <div class="envelope" id="env">
            <h3 id="letter-title">حرف (أ)</h3>
            <p id="question-text" style="font-size: 1.2rem; text-align: center; font-weight: bold;"></p>
            <p style="font-size: 0.8rem; color: #b45309; margin-top: 10px;">إضغط في أي مكان للإغلاق</p>
        </div>
    </div>

    <div id="war-alert"></div>

    <script>
        const letters = "أبتثجحخدذرزسشصضطظعغفقكلمنهوي".split("");
        const bank = {
            "أ": "ما هو الاسم الذي يطلق على بيت الأسد؟",
            "ب": "ما هو الحيوان الذي يلقب بسفينة الصحراء؟",
            "ت": "فاكهة ذكرت في القرآن الكريم مع الزيتون؟",
            "ث": "ما هو الاسم الذي يطلق على ابن الأسد؟",
            "ج": "ما هو العضو المسؤول عن توازن جسم الإنسان؟",
            "ح": "طائر جميل يضرب به المثل في الجمال؟",
            "خ": "ما هو الحيوان الذي يلقب بـ 'أبو الحصين'؟",
            "د": "ما هي عاصمة المملكة العربية السعودية؟",
            "ذ": "ما هو الحيوان الذي يلقب بـ 'أبو جعدة'؟",
            "ر": "ما هي أكبر قارة في العالم؟",
            "ز": "ما هو الكوكب الملقب بالكوكب الأحمر؟"
            // يمكنك إضافة باقي الحروف هنا بنفس النمط
        };

        let selectedHex = null;

        function navTo(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            if(screenId === 'grid-screen') initGrid();
        }

        function initGrid() {
            const grid = document.getElementById('main-grid');
            grid.innerHTML = "";
            letters.slice(0, 20).forEach(l => {
                const div = document.createElement('div');
                div.className = "hexagon";
                div.innerText = l;
                div.onclick = () => openQuestion(l, div);
                grid.appendChild(div);
            });
        }

        function openQuestion(letter, element) {
            selectedHex = element;
            document.getElementById('letter-title').innerText = `سؤال حرف (${letter})`;
            document.getElementById('question-text').innerText = bank[letter] || "لم يتم إضافة سؤال لهذا الحرف بعد، الإجابة تبدأ بـ " + letter;
            document.getElementById('envelope-overlay').style.display = 'flex';
            setTimeout(() => document.getElementById('env').classList.add('open'), 10);
        }

        function closeEnvelope() {
            // منطق تغيير اللون بعد الإجابة (تبادلي بين الفريقين)
            if(selectedHex) {
                if(!selectedHex.classList.contains('hex-green') && !selectedHex.classList.contains('hex-purple')) {
                    selectedHex.classList.add('hex-green');
                } else if(selectedHex.classList.contains('hex-green')) {
                    selectedHex.classList.remove('hex-green');
                    selectedHex.classList.add('hex-purple');
                } else {
                    selectedHex.classList.remove('hex-purple');
                }
            }
            document.getElementById('env').classList.remove('open');
            setTimeout(() => document.getElementById('envelope-overlay').style.display = 'none', 300);
        }

        function triggerWar() {
            document.getElementById('war-alert').style.display = 'block';
            // صوت إنذار حقيقي
            let ctx = new AudioContext();
            let osc = ctx.createOscillator();
            osc.type = 'sawtooth';
            osc.frequency.value = 440;
            osc.connect(ctx.destination);
            osc.start();
            setTimeout(() => { location.reload(); }, 2000);
        }
    </script>
</body>
</html>
